<div class="{{post_class}} postitem group break-inside-avoid mb-8">
   <div
      class="rounded-3xl transition-all duration-500 overflow-hidden bg-white dark:bg-slate-900 border border-gray-100 dark:border-white/5 hover:border-blue-500 dark:hover:border-blue-400 hover:shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:hover:shadow-[0_0_30px_rgba(59,130,246,0.15)] relative h-full flex flex-col group-hover:shadow-2xl">

      <!-- Featured Badge -->
      {{#if featured}}
      <div class="absolute top-4 left-4 z-50">
         <span
            class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold bg-white/90 dark:bg-slate-900/90 backdrop-blur-md text-blue-600 dark:text-blue-400 border border-white/20 shadow-sm">
            <span class="w-1.5 h-1.5 rounded-full bg-blue-500 mr-1.5 animate-pulse"></span>
            {{t "featured"}}
         </span>
      </div>
      {{/if}}

      <!-- Type Badge: Blog -->
      <div class="absolute top-4 right-4 z-50">
         <span
            class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gradient-to-r from-purple-600 to-indigo-500 text-white shadow-lg shadow-purple-500/30 border border-purple-400/30 backdrop-blur-md">
            <svg class="w-3 h-3 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
               </path>
            </svg>
            {{t "blog"}}
         </span>
      </div>

      <!-- Image -->
      <div class="relative overflow-hidden aspect-video">
         <a href="{{url}}" class="block h-full">
            {{#if feature_image}}
            <img class="w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-110"
               srcset="{{img_url feature_image size=" s"}} 300w, {{img_url feature_image size="m" }} 600w, {{img_url
               feature_image size="l" }} 1000w, {{img_url feature_image size="xl" }} 2000w"
               sizes="(max-width: 1000px) 400px, 700px" src="{{img_url feature_image size=" m"}}" alt="{{title}}"
               loading="lazy" />
            {{else}}
            <div
               class="w-full h-full bg-gradient-to-br from-purple-100 via-blue-50 to-indigo-100 dark:from-slate-800 dark:via-slate-850 dark:to-indigo-950 relative overflow-hidden">
               <!-- Background Pattern -->
               <div class="absolute inset-0 opacity-5 dark:opacity-10">
                  <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                     <pattern id="grid-post" width="10" height="10" patternUnits="userSpaceOnUse">
                        <path d="M 10 0 L 0 0 0 10" fill="none" stroke="currentColor" stroke-width="0.5" />
                     </pattern>
                     <rect width="100" height="100" fill="url(#grid-post)" />
                  </svg>
               </div>
               <!-- Title Overlay -->
               <div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10">
                  {{#if @site.logo}}
                  <img src="{{@site.logo}}" alt="{{@site.title}}"
                     class="h-12 w-auto max-w-[120px] mb-3 opacity-80 dark:opacity-70 object-contain" loading="lazy" />
                  {{else}}
                  <svg class="w-10 h-10 text-purple-400 dark:text-purple-600 mb-3 opacity-50" fill="none"
                     stroke="currentColor" viewBox="0 0 24 24">
                     <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                     </path>
                  </svg>
                  {{/if}}
                  <h3
                     class="text-lg font-extrabold text-gray-900 dark:text-white line-clamp-3 leading-tight px-4 drop-shadow-sm">
                     {{title}}
                  </h3>
               </div>
            </div>
            {{/if}}
            <!-- Subtle Gradient Overlay -->
            <div
               class="absolute inset-0 bg-gradient-to-t from-slate-900/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
            </div>
         </a>
      </div>

      <!-- Content -->
      <div class="p-6 flex flex-col flex-grow relative">
         <!-- Tags (Optional - if you want to show primary tag) -->
         {{#if primary_tag}}
         <div class="mb-3">
            <a href="{{primary_tag.url}}"
               class="text-xs font-bold text-blue-600 dark:text-blue-400 hover:underline uppercase tracking-wider">{{primary_tag.name}}</a>
         </div>
         {{/if}}

         <!-- Post Title -->
         <h4
            class="post-title text-lg font-bold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300 mb-2 line-clamp-2 leading-snug">
            <a href="{{url}}">{{title}}</a>
         </h4>

         <!-- Excerpt -->
         <p class="text-gray-600 dark:text-gray-400 line-clamp-2 mb-4 text-sm leading-relaxed flex-grow">
            {{excerpt}}
         </p>

         <!-- Author Section -->
         <div class="flex items-center justify-between pt-4 mt-auto border-t border-gray-100 dark:border-gray-800/50">
            {{#primary_author}}
            <div class="flex items-center group/author">
               {{#if profile_image}}
               <img class="w-8 h-8 rounded-full object-cover ring-2 ring-white dark:ring-slate-800"
                  src="{{img_url profile_image size=" xs"}}" alt="{{name}}" loading="lazy" />
               {{else}}
               <div
                  class="w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-500">
                  {{name.[0]}}</div>
               {{/if}}
               <div class="ml-2.5">
                  <h6
                     class="text-xs font-bold text-gray-900 dark:text-gray-200 group-hover/author:text-blue-600 dark:group-hover/author:text-blue-400 transition-colors duration-300 uppercase tracking-wide">
                     <a href="{{url}}">{{name}}</a>
                  </h6>
               </div>
            </div>
            {{/primary_author}}

            <!-- Date -->
            <div class="text-xs font-medium text-gray-400 dark:text-gray-500">
               {{date published_at format="MMM DD, YYYY"}}
            </div>
         </div>
      </div>
   </div>
</div>